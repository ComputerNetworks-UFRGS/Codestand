{% extends "base_codematch.html" %}

{% load ietf_filters %}

{% block title %}List of CodeMatch Projects{% endblock %}

{% block bodyAttrs %}data-spy="scroll" data-target="#affix"{% endblock %}

{% block content %}
<!-- Main content starts -->  

<div class="content" style="padding:0">
    
    <!-- Main bar -->
    <div class="mainbar">
        
        <!-- Page heading -->
        <div class="page-head">
            <h2 class="pull-left"><i class="icon ion-arrow-shrink" style="font-size: 20px;"></i> CodeMatches</h2>
            
            <!-- Breadcrumb -->
            <div class="bread-crumb pull-right">
                <a href="{% url "ietf.codematch.views.index" %}"><i class="fa fa-home"></i> Home</a>
                <!-- Divider -->
                <span class="divider">/</span>
                <a href="#" class="bread-current">CodeMatches</a>
            </div>
            
            <div class="clearfix"></div>
            
        </div>
        <!-- Page heading ends -->
        
        <!-- Matter -->
        
        <div class="matter">
            <div class="container">
            	
                <!-- Recent News -->
                <div class="col-md-12">
                    <div class="widget">
                        <!-- Widget title -->
                        <div class="widget-head">
                            <div class="pull-left">
                                <i class="fa fa-sort"></i> <span style="font-weight: lighter">Order by: </span> 
                                <a href="#">Title/Project</a> | 
                                <a href="#">Coder</a> | 
                                <a href="#">Coding Request</a> | 
                                <a href="#">Protocol</a> | 
                                <a href="#">Area</a> | 
                                <a href="#">Working Group</a>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="widget-content referrer">
                            <!-- Widget content -->
                            <div class="padd">
                                <ul class="latest-news">
                            	{% if projectcontainers %}
                                    {% for projectcontainer in projectcontainers %}
                                    	{% for coding in projectcontainer.codings.all %}
                                    		{% if coding in codings %}
		                               		<li>
		                                    	<!-- Title and date -->
		                                    	<h5><a href="{% url 'show' projectcontainer.id coding.id %}">{{ coding.title }}</a> <span>by</span> <a href="#">{{ coding.coder.name }}</a>
                		                      	{% if user.is_authenticated and coding.coder == owner %}
						                   			<a class="label label-info" href="{% url 'ietf.codematch.matches.views.edit' projectcontainer.id coding.id %}" style="margin-left: 30px"><i class="fa fa-pencil"></i> Edit</a> 
								               		<a class="label label-warning" href="#" ><i class="fa fa-folder"></i> Archive</a>
												{% endif %}
												</h5>
		                                    	<!--<h6><a href="{% url 'show' projectcontainer.id coding.id %}">{{ coding.title }}</a> <span>by</span> <a href="#">{{ coding.coder.name }}</a></h6>-->
		                                    	<p>{{ projectcontainer.description|linebreaks }}</p>
		                                    	<p>
		                                    	{% if projectcontainer.code_request == None %}
		                                    	CodeRequest: 	 <a href="#">None</a>
		                                    	{% else %}
		                                    	CodeRequest: 	 <a href="{% url 'ietf.codematch.requests.views.show' projectcontainer.id %}">{{ projectcontainer.title }}</a>
		                                    	{% endif %} 
		                                    	| Protocol:  	 <a href="#">{{ projectcontainer.protocol }}</a> 
		                                    	| Area:    	 	 <a href="#">
		                                    	{% for doc in docs %}	    
		                                    		{% if doc in projectcontainer.docs.all %}                  		
							            				{% if not forloop.first %}
							            				-
							            				{% endif %}
							            				<a href="#">{{ doc.document.group.parent.name }}</a>
						            				{% endif %}
					            				{% endfor %}
					            				</a>
		                                    	| Working Group: <a href="#">
		                                    	{% for doc in docs %}	    
		                                    		{% if doc in projectcontainer.docs.all %}                  		
							            				{% if not forloop.first %}
							            				-
							            				{% endif %}
							            				<a href="#">{{ doc.document.group.name }}</a>
						            				{% endif %}
					            				{% endfor %}
					            				</a>
		                                    	</p>
		                                	</li>
		                                	{% endif %}
                                    	{% endfor %}
                                    {% endfor %}
                                {% else %}
								<div class="alert alert-info" style="margin: 5px;">
								    <p align="center">
									No data to display  
								    </p>
							    </div>
								{% endif %}
                                </ul> 
                            </div>
                            <div class="widget-foot">
                                <p class="buttonlist">
                                {% if user.is_authenticated %}
                                	<a class="btn btn-default" href="{% url "ietf.codematch.matches.views.new" %}">New CodeMatch Project</a>
                                {% endif %}
                                {% if projectcontainers %}
                                	<a class="btn btn-default" href="{% url "ietf.codematch.matches.views.search" %}">Search</a>
                                {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
        <!-- Matter ends -->
        
    </div>
    
    <!-- Mainbar ends -->
    <div class="clearfix"></div>
    
</div>
<!-- Content ends -->

{% endblock %}